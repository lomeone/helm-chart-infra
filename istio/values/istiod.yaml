profile: ambient

env:
  PILOT_ENABLE_ALPHA_GATEWAY_API: "true"

meshConfig:
  accessLogEncoding: JSON
  accessLogFile: /dev/stdout
  enablePrometheusMerger: true
  enableTracing: true
  extensionProviders:
    - name: mesh-jaeger-tracing
      opentelemetry:
        service: jaeger-inmemory-instance-collector.observability.svc.cluster.local
        port: 4317
    - name: mesh-prometheus-metrics
      prometheus:
        path: /dev/stdout
        logFormat:
          text: "%LOCAL_REPLY_BODY%:%RESPONSE_CODE%:path=%REQ(:path)%"
        omitEmptyValues: true
#    - name: mesh-zipkin-tracing
#      zipkin:
#        service: jaeger-inmemory-instance-collector.observability.svc.cluster.local
#        port: 9411
#    - name: mesh-default-logging
#      envoyFileAccessLog:
#        logFormat:
#          labels:
#            severity: '"info"'
#          jsonFormat: ~~~~~
  defaultConfig:
    tracing: {}
#      zipkin:
#        address: jaeger-inmemory-instance-collector.observability.svc.cluster.local:9411
#        sampling: 100.0
#      datadog: datadog.url
#      sampling: 100.0

global:
  hub: 396428372646.dkr.ecr.ap-northeast-2.amazonaws.com/docker-hub/istio

resources:
  requests:
    cpu: 50m
    memory: 96Mi
  limits:
    memory: 96Mi

autoscaleEnabled: true
autoscaleMin: 2
autoscaleMax: 5
